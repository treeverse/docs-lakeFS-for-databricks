

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <link rel="stylesheet" href="/assets/css/just-the-docs-default.css">
  
  <style type="text/css">
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.external):nth-child(2) > .nav-list > .nav-list-item:nth-child(2) > .nav-list > .nav-list-item:nth-child(1) > .nav-list-link { display: block; font-weight: 600; text-decoration: none; background-image: linear-gradient(-90deg, #ebedf5 0%, rgba(235, 237, 245, 0.8) 80%, rgba(235, 237, 245, 0) 100%); }

.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(2) > .nav-list-expander svg, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(2) > .nav-list > .nav-list-item:not(.passive):nth-child(2) > .nav-list-expander svg { transform: rotate(-90deg); }
.site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(2) > .nav-list, .site-nav > .nav-list:nth-child(1):not(.nav-category-list) > .nav-list-item:not(.passive):nth-child(2) > .nav-list > .nav-list-item:not(.passive):nth-child(2) > .nav-list { display: block; }

.site-nav > .nav-category-list > .nav-list-item:not(.passive) > .nav-list-expander svg { transform: rotate(-90deg); }
.site-nav > .nav-category-list > .nav-list-item:not(.passive) > .nav-list { display: block; }

</style>


  

  
    <script src="/assets/js/vendor/lunr.min.js"></script>
  

  <script src="/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="icon" href="/favicon.ico" type="image/x-icon">



  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>AWS | Docs</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="AWS" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to setup lakeFS for databricks cloud environment on AWS" />
<meta property="og:description" content="How to setup lakeFS for databricks cloud environment on AWS" />
<meta property="og:site_name" content="Docs" />
<meta property="og:image" content="https://docs-databricks.lakefs.io/assets/img/docs_logo.png" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:image" content="https://docs-databricks.lakefs.io/assets/img/docs_logo.png" />
<meta property="twitter:title" content="AWS" />
<meta name="twitter:site" content="@lakeFS" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"How to setup lakeFS for databricks cloud environment on AWS","headline":"AWS","image":"https://docs-databricks.lakefs.io/assets/img/docs_logo.png","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/lakeFS_for_databricks_logo.svg"}},"url":"/getstarted/setup/aws.html"}</script>
<!-- End Jekyll SEO tag -->


  <!-- Google Tag Manager Head -->
<!-- type="text/plain" is intentional for cookie consent support -->
<script type="text/plain" data-category="analytics">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KTZBZW9');</script>
<!-- End Google Tag Manager Head -->

<meta property="og:image" content="/assets/img/lakefs-logo-with-text.png">
<link rel="preload" href="/assets/fonts/Rene Bieder - Galano Grotesque.otf" as="font" type="font/otf" crossorigin>
<link rel="preload" href="/assets/fonts/Rene Bieder - Galano Grotesque Medium.otf" as="font" type="font/otf" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/fontawesome.min.css" integrity="sha512-giQeaPns4lQTBMRpOOHsYnGw1tGVzbAIHUyHRgn7+6FmiEgGGjaG0T2LZJmAPMzRCl+Cug0ItQ2xDZpTmEc+CQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<link rel="stylesheet" href="/assets/css/cookieconsent.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>
<script type="module" src="/assets/js/cookieconsent-init.js"></script>
<script src="/assets/js/copy-code.js"></script>
<script>
    $(function () {
        $(".tabs").tabs();
    });
</script>
<script src="/assets/js/feedback.js"></script>
<link href="https://data-folks.masto.host/@lakeFS" rel="me">

</head>

<script src="https://unpkg.com/mermaid@9.3.0/dist/mermaid.min.js"></script>
<script>
    $(document).ready(function () {
        mermaid.initialize({
            startOnLoad:true,
            theme: "default",
        });
        window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
    });
</script>
<body>
<img src="/assets/img/cookies.png" style="display: none;">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KTZBZW9"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
        <title>Link</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-link">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
        </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
        <title>Search</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-search">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="16px" viewBox="0 0 20 16" version="1.1"
             class="feather feather-menu">
            <g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="header-/-mobile" transform="translate(-30.000000, -32.000000)" fill="#279890">
                    <g id="Group" transform="translate(30.000000, 32.000000)">
                        <path
                                d="M20,14 L20,16 L0,16 L0,14 L20,14 Z M20,7 L20,9 L0,9 L0,7 L20,7 Z M20,0 L20,2 L0,2 L0,0 L20,0 Z"
                                id="mobile-menu" />
                    </g>
                </g>
            </g>
        </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-chevron-right">
            <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
        <title>Document</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
             class="feather feather-file">
            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
            <polyline points="13 2 13 9 20 9"></polyline>
        </svg>
    </symbol>
</svg>
<div class="body-wrapper">
    <div class="side-bar">
        <div class="site-header">
            <a href="https://docs-databricks.lakefs.io" class="site-title lh-tight">
  <div class="site-logo" role="img" aria-label="Docs"></div>

</a>
            <a href="#" id="menu-button" class="site-button">
                <svg viewBox="0 0 24 24" class="icon">
                    <use xlink:href="#svg-menu"></use>
                </svg>
            </a>
        </div>
        <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
            
            <div class="search">
                <div class="search-input-wrap">
                    <input type="text" id="search-input" class="search-input" tabindex="0"
                           placeholder="Search Docs" aria-label="Search Docs"
                           autocomplete="off">
                    <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon">
                            <use xlink:href="#svg-search"></use>
                        </svg></label>
                </div>
                <div id="search-results" class="search-results"></div>
            </div>
            

            <div class="nav-category nav-version">
                <label for="selectversion">Version:</label>
                <select id="selectversion" name="version" onchange="javascript:location.href = '/' + encodeURI(this.value);">
                    <option value="" selected>Latest</option>
                </select>
            </div>
            <script async>
                window.addEventListener("load",  async () => {
                    const pathFirstLevel = location.pathname.split('/')[1];
                    const selectedVersion = pathFirstLevel.startsWith('v') && pathFirstLevel || '';
                    const selectVersionElmFirst = document.getElementById('selectversion').firstElementChild;
                    const response = await fetch('/versions.json');
                    if (!response.ok) {
                        return
                    }
                    const versions = await response.json();
                    for (let [key, value] of Object.entries(versions)) {
                        const el = document.createElement("option");
                        el.value = key;
                        el.textContent = value;
                        if (key === selectedVersion) {
                            el.selected = true;
                        }
                        selectVersionElmFirst.after(el);
                    }
                });
            </script>

            <ul class="nav-list"><li
            class="nav-list-item"><a href="/"
           class="nav-list-link">lakeFS for Databricks</a></li><li
            class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
            </svg></a><a href="/getstarted/"
           class="nav-list-link">Get Started</a><ul class="nav-list "><li class="nav-list-item "><a href="/getstarted/install.html"
                   class="nav-list-link">Install</a></li><li class="nav-list-item  active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
                        <use xlink:href="#svg-arrow-right"></use>
                    </svg></a><a href="/getstarted/setup/"
                   class="nav-list-link">Setup</a><ul class="nav-list"><li class="nav-list-item  active">
                        <a href="/getstarted/setup/aws.html"
                           class="nav-list-link active">AWS</a>
                    </li><li class="nav-list-item ">
                        <a href="/getstarted/setup/azure.html"
                           class="nav-list-link">Azure</a>
                    </li></ul></li><li class="nav-list-item "><a href="/getstarted/try-it-out.html"
                   class="nav-list-link">Try it Out</a></li></ul></li><li
            class="nav-list-item"><a href="/cli-reference.html"
           class="nav-list-link">CLI Reference</a></li><li
            class="nav-list-item"><a href="/limitations.html"
           class="nav-list-link">Limitations</a></li></ul>
            <div class="mobile-menu">
                
<nav aria-label="Auxiliary" class="aux-nav">
    <ul class="aux-nav-list">
        
        
        <li class="aux-nav-list-item">
            <a href="https://docs-databricks.lakefs.io/" class="site-button" >
                Docs
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://docs-databricks.lakefs.io/blog/" class="site-button" >
                Blog
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://docs-databricks.lakefs.io/community/" class="site-button" >
                Community
            </a>
        </li>
        
        
        
        
        <li class="aux-nav-list-item button">
            <a href="https://lakefs.io/slack" class="site-button" >
                Join us on Slack
            </a>
        </li>
        
        
    </ul>
</nav>

            </div>
        </nav>

    </div>
    <div class="main" id="top">
         <div class="feedback-container">
            <div id="is-helpful-ty">
                <div class="text-epsilon">Thank you for your feedback.</div>
                <div class="mt-2 text-epsilon">
                    <a href="https://lakefs.io/slack" target="_blank">Join the community</a> to get more help.
                </div>
            </div>
            <div class="feedback-buttons">
                <span class="tooltip">
                    <button class="page-helpful-btn far fa-lg fa-thumbs-up" id="page-helpful-yes"></button>
                    <span class="tooltiptext">
                        This page is <b>helpful</b>
                    </span>
                </span>
                <span class="tooltip">
                    <button class="page-helpful-btn far fa-lg fa-thumbs-down" id="page-helpful-no"></button>
                    <span class="tooltiptext">
                        This page is <b>not helpful</b>
                    </span>
                </span>
            </div>
        </div>
        <div id="main-header" class="main-header">
            
<nav aria-label="Auxiliary" class="aux-nav">
    <ul class="aux-nav-list">
        
        
        <li class="aux-nav-list-item">
            <a href="https://docs-databricks.lakefs.io/" class="site-button" >
                Docs
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://docs-databricks.lakefs.io/blog/" class="site-button" >
                Blog
            </a>
        </li>
        
        <li class="aux-nav-list-item">
            <a href="https://docs-databricks.lakefs.io/community/" class="site-button" >
                Community
            </a>
        </li>
        
        
        
        
        <li class="aux-nav-list-item button">
            <a href="https://lakefs.io/slack" class="site-button" >
                Join us on Slack
            </a>
        </li>
        
        
    </ul>
</nav>

        </div>
        <div id="main-content-wrap" class="main-content-wrap">
            
            
            <nav aria-label="Breadcrumb" class="breadcrumb-nav">
                <ol class="breadcrumb-nav-list">
                    
                    <li class="breadcrumb-nav-list-item"><a
                                href="/getstarted/">Get Started</a>
                    </li>
                    <li class="breadcrumb-nav-list-item"><a href="/getstarted/setup/">Setup</a>
                    </li>
                    
                    <li class="breadcrumb-nav-list-item"><span>AWS</span></li>
                </ol>
            </nav>
            
            
            <div id="main-content" class="main-content" role="main">
                
                    <h1 id="setup-lakefs-for-databricks-on-aws">
  
  
    <a href="#setup-lakefs-for-databricks-on-aws" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setup lakeFS for Databricks on AWS
  
  
</h1>
    

<p>Setting up lakeFS for Databricks on AWS involves three steps:</p>
<ol>
  <li>Prepare Your <strong>Databricks Workspace</strong>: to enable access to Unity Catalog and External storage locations</li>
  <li>Set Up <strong>lakeFS Cloud</strong>: Configure lakeFS Cloud to version your Unity Catalog data</li>
  <li>Configure the <code class="language-plaintext highlighter-rouge">lakefs-databricks</code> CLI: configure the lakefs-databricks CLI tool to interact with your Databricks workspace and lakeFS Cloud</li>
</ol>

<div class="toc-block">
<h2 class="no_toc text-delta" id="table-of-contents">
  
  
    <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents
  
  
</h2>
    

<ol id="markdown-toc">
  <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a></li>
  <li><a href="#prepare-your-databricks-workspace" id="markdown-toc-prepare-your-databricks-workspace">Prepare your Databricks Workspace</a></li>
  <li><a href="#setup-lakefs-cloud" id="markdown-toc-setup-lakefs-cloud">Setup lakeFS Cloud</a></li>
  <li><a href="#configure-the-lakefs-databricks-cli" id="markdown-toc-configure-the-lakefs-databricks-cli">Configure the <code class="language-plaintext highlighter-rouge">lakefs-databricks</code> CLI</a></li>
</ol>

</div>
<h2 id="prerequisites">
  
  
    <a href="#prerequisites" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites
  
  
</h2>
    

<ol>
  <li>Databricks workspace with Unity Catalog enabled.</li>
  <li>AWS account, with the permissions to create policies and IAM Roles or Users.</li>
  <li>Ensure you have an S3 bucket or a specific prefix within a bucket ready for lakeFS to use with Databricks, such as, <code class="language-plaintext highlighter-rouge">s3://lakefs-for-databricks</code> or <code class="language-plaintext highlighter-rouge">s3://my-bucket/lakefs-for-databricks</code>. 
lakeFS for Databricks will create catalogs under this container.</li>
</ol>
<h2 id="prepare-your-databricks-workspace">
  
  
    <a href="#prepare-your-databricks-workspace" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prepare your Databricks Workspace
  
  
</h2>
    

<p>Create the following resources within your Databricks workspace:</p>
<ul>
  <li><strong>Storage Credentials</strong>: Create Databricks <a href="https://docs.databricks.com/en/sql/language-manual/sql-ref-storage-credentials.html">Storage Credentials</a>
that provide read and write access to the S3 bucket or prefix selected for lakeFS for Databricks (refer to <a href="#prerequisites">prerequisites</a>). Ensure your workspace has permission to use these storage credentials.</li>
  <li>
    <p><strong>External Location</strong>: Use the storage credentials created in the previous step to define an <a href="https://docs.databricks.com/en/sql/language-manual/sql-ref-external-locations.html">External Location</a> for a URL within
the selected S3 bucket prefix for lakeFS for Databricks (refer to <a href="#prerequisites">prerequisites</a>), e.g. <code class="language-plaintext highlighter-rouge">s3://lakefs-for-databricks/my-first-catalog</code>. Ensure your Databricks workspace has access to this location.</p>

    <p class="note"><strong>Note</strong><br />
It is recommended to create a dedicated external location for each catalog lakeFS for Databricks create and manages.</p>
  </li>
  <li><strong>Personal Access Token</strong>: Generate a <a href="https://docs.databricks.com/en/dev-tools/auth/pat.html">personal access token</a> for a Databricks user with the following permissions:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">CREATE MANAGED STORAGE</code> for the specified external location</li>
      <li><code class="language-plaintext highlighter-rouge">CREATE CATALOG</code> for the workspace’s metastore to enable catalog creation</li>
    </ul>
  </li>
</ul>
<h2 id="setup-lakefs-cloud">
  
  
    <a href="#setup-lakefs-cloud" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setup lakeFS Cloud
  
  
</h2>
    
<h3 id="step-1-log-in-to-your-lakefs-cloud-account">
  
  
    <a href="#step-1-log-in-to-your-lakefs-cloud-account" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1: Log in to Your lakeFS Cloud Account
  
  
</h3>
    

<p>Log in to the <a href="(https://lakefs.cloud/)">lakeFS Cloud account</a> created during the <a href="/getstarted/install.html#create-a-lakefs-cloud-account">installation process</a>.</p>
<h3 id="step-2-configure-lakefs-cloud">
  
  
    <a href="#step-2-configure-lakefs-cloud" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2: Configure lakeFS Cloud
  
  
</h3>
    

<p>Follow these steps to configure lakeFS Cloud with the S3 bucket or prefix selected for lakeFS for Databricks (refer to <a href="#prerequisites">prerequisites</a>):.<br />
Navigate to <a href="https://lakefs.cloud/onboarding/setup">Onboarding -&gt; Setup</a>, and follow the guide to complete the setup wizard to ensure compatibility with lakeFS for Databricks:</p>

<div>
  <p>Select Cloud Vendor and Region to run the lakeFS Cloud Servers
  <img src="/assets/img/lakefs-databricks/get-started/aws_select_provider_and_region.png" /></p>

  <ul>
     <li><strong>Cloud Vendor</strong>: Select "AWS"</li>
     <li><strong>Region</strong>: Choose the region where your Databricks Workspace is located</li>
  </ul>
</div>

<div>
  <p>Select Authentication Method
  <img src="/assets/img/lakefs-databricks/get-started/aws_select_auth_type.png" /></p>
  <ul>
     <li>Select authentication method: Static credentials or IAM Role</li>
     <li>If you selected static credentials, use <a href="https://docs.lakefs.io/howto/deploy/aws.html#prepare-your-s3-bucket">this guide</a> as a reference for the S3 permissions this user needs to have. Make sure that the user has permissions for the
         Bucket or Prefix you selected for lakeFS for Databricks as specified in the <a href="#prerequisites">Prerequisites</a> section.</li>
  </ul>

  <p class="note"><strong>Note</strong><br />
It is recommended to use IAM Role as it is a more secure option.</p>
</div>

<div>
  <p>Create Roles
  <img src="/assets/img/lakefs-databricks/get-started/aws_create_iam_role.png" /></p>
  <ul>
     <li>Fill in Bucket and Prefix you selected for lakeFS for Databricks as specified in the <a href="#prerequisites">Prerequisites</a> section.</li>
  </ul>

  <p class="note"><strong>Note</strong><br />
Garbage Collection is currently unsupported by lakeFS for Databricks. Please disable it during setup.</p>
</div>

<div>
  <p>Apply Terraform or CloudFormation templates to create AWS Resources
  <img src="/assets/img/lakefs-databricks/get-started/aws_templates.png" /></p>

  <ul>
     <li>Switch to your AWS account and apply the created Terraform or CloudFormation templates to create resources required by lakeFS Cloud</li>
  </ul>
</div>

<div>
  <p>Connectivity Test
  <img src="/assets/img/lakefs-databricks/get-started/aws_role_connectivity_test.png" /></p>

  <ul>
     <li>Test your connection!</li>
  </ul>
</div>
<h3 id="step-3-log-in-to-your-lakefs-cloud-installation">
  
  
    <a href="#step-3-log-in-to-your-lakefs-cloud-installation" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 3: Log in to your lakeFS Cloud Installation
  
  
</h3>
    

<p>Log in to the installation created during the setup process you’ve followed:</p>
<ul>
  <li>Navigate to <a href="https://lakefs.cloud/clusters">Clusters</a> and click on the link to the newly created installation.</li>
  <li>Log in to your lakeFS instance.</li>
</ul>
<h3 id="step-4-generate-lakefs-credentials">
  
  
    <a href="#step-4-generate-lakefs-credentials" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 4: Generate lakeFS Credentials
  
  
</h3>
    

<p>To generate credentials for lakeFS for Databricks:</p>
<ul>
  <li>In the lakeFS UI, go to the <strong>Administration</strong> tab.</li>
  <li>Click “Create Access Key”<br />
<img src="/assets/img/lakefs-databricks/get-started/create_access_key.png" /></li>
  <li>Save the access key and secret key in a secure location</li>
  <li>By default, these credentials have admin permissions. If you need more restrictive permissions, create a user with the following steps:
    <ul>
      <li>Go to <strong>Administration -&gt; Users</strong></li>
      <li>Click “Create API User” and name it “lakeFS for Databricks”</li>
      <li>Go to <strong>Administration -&gt; Policies</strong> and create the policy below:
        <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lakeFSForDatabricksPolicy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"action"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="s2">"fs:ListRepositories"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:ReadRepository"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:UpdateRepository"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:ReadCommit"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:ListBranches"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:ListTags"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:ListObjects"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:ReadObject"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:WriteObject"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:DeleteObject"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:RevertBranch"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:ReadBranch"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:ReadTag"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:CreateBranch"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:CreateTag"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:DeleteBranch"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:DeleteTag"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"fs:CreateCommit"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"allow"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:lakefs:fs:::repository/{repositoryId}"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>        </div>
      </li>
      <li>Go to <strong>Administration -&gt; Users</strong></li>
      <li>Select “lakeFS for Databricks”</li>
      <li>Attach the newly created <code class="language-plaintext highlighter-rouge">lakeFSForDatabricksPolicy</code></li>
    </ul>
  </li>
</ul>
<h2 id="configure-the-lakefs-databricks-cli">
  
  
    <a href="#configure-the-lakefs-databricks-cli" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configure the <code class="language-plaintext highlighter-rouge">lakefs-databricks</code> CLI
  
  
</h2>
    
<h3 id="step-1-create-aws-static-credentials">
  
  
    <a href="#step-1-create-aws-static-credentials" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1: Create AWS Static Credentials
  
  
</h3>
    

<p>lakeFS for Databricks uses static AWS credentials to access the Bucket or prefix that was selected for it (see <a href="#prerequisites">Prerequisites</a>).
The following policies should apply to the user you created the access-key pair for:</p>

<p>Assuming that you selected <code class="language-plaintext highlighter-rouge">s3://my-bucket/lakefs-for-databricks</code> for lakeFS for Databricks. the policy below defines the access lakeFS for Databricks needs to the storage:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"s3:DeleteObject"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"s3:PutObject"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"s3:GetObject"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:s3:::my-bucket/lakefs-for-databricks/*"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s3:ListBucket"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:s3:::my-bucket"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Condition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"StringLike"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"s3:prefix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lakefs-for-databricks*"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>lakeFS for Databricks enables you to create catalogs with sample data. If you want to use this functionality define the policy below to
allow access to public buckets example with no access in the caller account.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s3:*"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Condition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"StringNotEquals"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"aws:PrincipalAccount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YOUR_ACCOUNT_ID"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<h3 id="step-2-configure-the-cli">
  
  
    <a href="#step-2-configure-the-cli" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2: Configure the CLI
  
  
</h3>
    

<p>Follow the <code class="language-plaintext highlighter-rouge">lakefs-databricks</code> <a href="/cli-reference.html#cli-configuration">configuration guide</a>.</p>

                

                
                
                <div style="float: left" class="mt-5">

                    <a type="button" class="btn btn-green" href="./../install.html">
                        <i class="fa fa-solid fa-arrow-left"></i> Previous: Install lakeFS for Databricks
                    </a>
                </div>
                

                
                <div style="float: right" class="mt-5">

                    <a type="button" class="btn btn-green" href="./../try-it-out.html">
                        Next: Start using lakeFS for Databricks <i class="fa fa-solid fa-arrow-right"></i>
                    </a>
                </div>
                

            </div>
        </div>

        
        

        <div class="search-overlay"></div>
        
    </div>
</div>

<footer>
    <div class="footer-sidebar"></div>
    <div class="footer-main">
        <div class="row">
            <div class="left">
                <ul class="footer-links">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://docs-databricks.lakefs.io/" class="site-button" >
                            Docs
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://docs-databricks.lakefs.io/blog/" class="site-button" >
                            Blog
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://docs-databricks.lakefs.io/community/" class="site-button" >
                            Community
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://docs-databricks.lakefs.io/contact-us/" class="site-button" >
                            Contact
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
            <div class="right">
                <ul class="footer-social">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://docs-databricks.lakefs.io/youtube" class="site-button" >
                            <img src="/assets/icons/youtube.svg" class="no-hover" />
                            <img src="/assets/icons/youtube-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://www.linkedin.com/company/treeverse" class="site-button" >
                            <img src="/assets/icons/linkedin.svg" class="no-hover" />
                            <img src="/assets/icons/linkedin-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://github.com/treeverse/lakeFS" class="site-button" >
                            <img src="/assets/icons/github.svg" class="no-hover" />
                            <img src="/assets/icons/github-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://twitter.com/lakeFS" class="site-button" >
                            <img src="/assets/icons/twitter.svg" class="no-hover" />
                            <img src="/assets/icons/twitter-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://data-folks.masto.host/@lakeFS" class="site-button" >
                            <img src="/assets/icons/mastodon.svg" class="no-hover" />
                            <img src="/assets/icons/mastodon-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://lakefs.io/slack" class="site-button" >
                            <img src="/assets/icons/slack.svg" class="no-hover" />
                            <img src="/assets/icons/slack-hover.svg" class="hover" />
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <div class="row top-border">
            <div class="left">
                <a href="https://docs-databricks.lakefs.io" class="lh-tight" style="margin-bottom: 0px;">
                    <div class="site-logo"></div>
                </a>                    
            </div>
            <div class="right">
                <ul class="bottom-footer-links">
                    
                    
                    <li class="aux-nav-list-item">
                        <a href="https://docs-databricks.lakefs.io/terms-of-use/" class="site-button" >
                            Terms of use
                        </a>
                    </li>
                    
                    <li class="aux-nav-list-item">
                        <a href="https://docs-databricks.lakefs.io/privacy-policy/" class="site-button" >
                            Privacy Policy
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
    </div>
</footer>


</body>

</html>

